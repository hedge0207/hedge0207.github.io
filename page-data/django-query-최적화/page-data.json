{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx","path":"/django-query-최적화","result":{"data":{"post":{"__typename":"MdxPost","slug":"/django-query-최적화","title":"Django Query 최적화","date":"09.01.2021","tags":[{"name":"django","slug":"django"}],"description":"Django Query 최적화","canonicalUrl":null,"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Django Query 최적화\",\n  \"date\": \"2021-01-09T00:00:00.000Z\",\n  \"description\": \"Django Query 최적화\",\n  \"tags\": [\"django\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", null, \"Query \\uCD5C\\uC801\\uD654\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.djangoproject.com/en/3.0/topics/db/optimization/\"\n  }), \"https://docs.djangoproject.com/en/3.0/topics/db/optimization/\"), \" \\uCC38\\uACE0\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\uCFFC\\uB9AC\\uC14B\\uC740 lazy\\uD558\\uB2E4.\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\uC2E4\\uC81C \\uC2E4\\uD589\\uB418\\uAE30 \\uC804\\uAE4C\\uC9C0\\uB294 \\uC791\\uB3D9\\uD558\\uC9C0 \\uC54A\\uB294\\uB2E4.\")), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-python\"\n  }), \"# \\uC544\\uB798 \\uBCF4\\uBA74 q\\uB77C\\uB294 \\uCFFC\\uB9AC\\uC14B\\uC744 \\uB9CC\\uB4E0 \\uAC83 \\uCC98\\uB7FC \\uBCF4\\uC774\\uC9C0\\uB9CC \\uC2E4\\uC81C print\\uB418\\uAE30 \\uC804\\uAE4C\\uC9C0 \\uCFFC\\uB9AC\\uC14B\\uC740 \\uC0DD\\uC131\\uB418\\uC9C0 \\uC54A\\uB294\\uB2E4. \\uC989 sql\\uBB38\\uC774 \\uC2E4\\uC81C \\uC2E4\\uD589\\uB418\\uC9C0 \\uC54A\\uB294\\uB2E4.\\n>>> q = Entry.objects.filter(headline__startswith=\\\"What\\\")\\n>>> q = q.filter(pub_date__lte=datetime.date.today())\\n>>> q = q.exclude(body_text__icontains=\\\"food\\\")\\n\\n# cf.\\uC774\\uB294 \\uB2E4\\uB974\\uAC8C \\uD45C\\uD604\\uD558\\uBA74 \\uC544\\uB798\\uC640 \\uAC19\\uB2E4(\\uCCB4\\uC774\\uB2DD)\\nq=Entry.objects.filter(headline__startswith=\\\"What\\\").filter(pub_date__lte=datetime.date.today()).exclude(body_text__icontains=\\\"food\\\")\\n\\n>>> print(q)  #\\uC774 \\uB54C\\uC5D0\\uC57C \\uCFFC\\uB9AC\\uC14B\\uC774 \\uC0DD\\uC131\\uB41C\\uB2E4(sql\\uBB38\\uC774 \\uC2E4\\uD589\\uB41C\\uB2E4.).\\n\")))), mdx(\"br\", null), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"sql\\uBB38\\uC774 \\uC2E4\\uC81C \\uC2E4\\uD589\\uB418\\uB294 \\uACBD\\uC6B0\\uB4E4\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\uBC18\\uBCF5\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"step\\uC774 \\uC788\\uB294 \\uACBD\\uC6B0\\uC758 \\uC2AC\\uB77C\\uC774\\uC2F1(ex.\", \"[3:8]\", \"\\uC774 \\uC544\\uB2CC \", \"[3:8:2]\", \"\\uAC19\\uC740 \\uACBD\\uC6B0)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"print(repr)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"len\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"boolean \\uC5F0\\uC0B0\\uC744 \\uD560 \\uB54C\")))), mdx(\"br\", null), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"sql\\uBB38\\uC740 \\uD55C \\uBC88 \\uC2E4\\uD589\\uB418\\uBA74, \\uADF8 \\uC774\\uD6C4\\uBD80\\uD130\\uB294 \\uB3D9\\uC77C\\uD55C \\uCFFC\\uB9AC\\uC14B\\uC744 \\uB9E4\\uBC88 \\uB2E4\\uC2DC \\uBD88\\uB7EC\\uC624\\uB294 \\uAC83\\uC774 \\uC544\\uB2C8\\uB77C, \\uCFFC\\uB9AC\\uC14B\\uC744 \\uBA54\\uBAA8\\uB9AC\\uC5D0 \\uC800\\uC7A5\\uD558\\uC5EC \\uCE90\\uC2DC\\uCC98\\uB7FC \\uD65C\\uC6A9\\uD55C\\uB2E4(ref. {% with%}).\")), mdx(\"br\", null), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\uC608\\uC2DC \\uB370\\uC774\\uD130\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-python\"\n  }), \"# \\uD14C\\uC2A4\\uD2B8\\uB97C \\uC704\\uD55C fake data\\uB97C \\uB2F4\\uC740 \\uD30C\\uC77C\\nimport random\\nfrom faker import Faker\\nfake = Faker()\\n\\nfor i in range(5):    #user\\uB294 5\\uBA85\\nUser.objects.create_user(\\nfake.user_name(),\\nfake.email(),\\n'1q2w3e4r!'\\n)\\n\\nfor i in range(1, 11):  #\\uAC8C\\uC2DC\\uAE00 10\\uAC1C\\nArticle.objects.create(\\ntitle=f'\\uD14C\\uC2A4\\uD2B8 {i}\\uAE00',\\ncontent=fake.text(),\\nuser_id=random.choice(range(1, 6))\\n)\\n\\nfor j in range(1, 11):   #\\uB313\\uAE00\\uC740 \\uAC8C\\uC2DC\\uAE00 1\\uAC1C\\uB2F9 10\\uAC1C(\\uCD1D 100\\uAC1C)\\nComment.objects.create(\\ncontent=fake.sentence(),\\narticle_id=i,\\nuser_id=random.choice(range(1, 6))\\n)\\n\")))), mdx(\"br\", null), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\uAC01\\uC885 \\uCD5C\\uC801\\uD654\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"views\\uD30C\\uC77C\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-python\"\n  }), \"#\\uAE30\\uC874 \\uD568\\uC218\\ndef index(request):\\n    articles = Article.objects.order_by('-pk')\\n    context = {\\n        'articles': articles\\n    }\\n    return render(request, 'articles/index.html', context)\\n\\n\\n#\\uBCC0\\uACBD \\uD568\\uC218\\n#Count\\uC640 Prefetch\\uB97C import\\nfrom django.db.models import Count, Prefetch\\n\\ndef index(request):\\n    articles = Article.objects.order_by('-pk')\\n    \\n    \\n    # 1) \\uB313\\uAE00 \\uC218\\n    # articles = Article.objects.annotate(comment_set_count=Count('comment')).order_by('-pk')\\n    \\n    '''\\n    annotate\\uB97C \\uD65C\\uC6A9,\\n    \\uC704\\uC758 comment_set_count\\uB294 \\uBCC0\\uC218\\uBA85\\uC774\\uB2E4. \\uC544\\uBB34\\uB807\\uAC8C\\uB098 \\uBD99\\uC5EC\\uB3C4 \\uB41C\\uB2E4.\\n    '''\\n    \\n    \\n    # 2) \\uAC8C\\uC2DC\\uAE00 \\uC791\\uC131\\uC790 \\uC774\\uB984 \\uCD9C\\uB825\\n    # articles = Article.objects.select_related('user').order_by('-pk')\\n    \\n    '''\\n    1(user):N(article)\\uC758 \\uAD00\\uACC4\\uB97C \\uAC00\\uC9C0\\uACE0 \\uC788\\uB294\\uB370 N\\uC785\\uC7A5\\uC5D0\\uC11C 1\\uC5D0 \\uB300\\uD55C \\uB370\\uC774\\uD130\\uB97C \\uAC19\\uC774 \\uAC00\\uC9C0\\uACE0 \\uC62C \\uB54C     select_related\\uB97C \\uD65C\\uC6A9\\n    \\n    select_related\\uB294\\n    1:1, 1:N \\uAD00\\uACC4\\uC5D0\\uC11C \\uCC38\\uC870\\uAD00\\uACC4(N\\uC774 1\\uC744 \\uCC3E\\uC744 \\uB54C)\\uC77C \\uB54C \\uC0AC\\uC6A9, SQL JOIN\\uC744 \\uD1B5\\uD574 \\uB370\\uC774\\uD130\\uB97C \\uAC00\\uC838\\uC628\\uB2E4.\\n    '''\\n    \\n    \\n    # 3) \\uB313\\uAE00 \\uBAA9\\uB85D\\n    # articles = Article.objects.prefetch_related('comment_set').order_by('-pk')\\n    \\n    '''\\n    1(article):N(comment)\\uC758 \\uAD00\\uACC4\\uB97C \\uAC00\\uC9C0\\uACE0 \\uC788\\uB294\\uB370 1\\uC785\\uC7A5\\uC5D0\\uC11C N\\uC5D0 \\uB300\\uD55C \\uB370\\uC774\\uD130\\uB97C \\uAC00\\uC9C0\\uACE0 \\uC62C \\uB54C     prefetch_related\\uB97C \\uD65C\\uC6A9\\n   \\n    prefetch_related\\uB294\\n    M:N, 1:N\\uAD00\\uACC4\\uC5D0\\uC11C \\uC5ED\\uCC38\\uC870\\uAD00\\uACC4(1\\uC774 N\\uC744 \\uCC3E\\uC744 \\uB54C)\\uC77C \\uB54C \\uC0AC\\uC6A9,  python\\uC744 \\uD1B5\\uD55C Join\\uC73C\\uB85C \\uB370\\uC774\\uD130\\uB97C     \\uAC00\\uC838\\uC628\\uB2E4.\\n    '''\\n    \\n    \\n    # 4) \\uB313\\uAE00 \\uBAA9\\uB85D\\uACFC \\uB313\\uAE00 \\uC791\\uC131\\uC790 \\uB3D9\\uC2DC \\uCD9C\\uB825\\n    articles = Article.objects.prefetch_related(\\n            Prefetch(\\n                'comment_set',\\n                queryset=Comment.objects.select_related('user')\\n            )\\n        ).order_by('-pk')\\n    context = {\\n        'articles': articles\\n    }\\n    return render(request, 'articles/index.html', context)\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"html\\uD30C\\uC77C\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-html\"\n  }), \"<!--index.html-->\\n\\n<!--1)\\uB313\\uAE00 \\uC218 \\uCD9C\\uB825-->\\n<!--\\uAE30\\uC874\\uD568\\uC218 \\uD65C\\uC6A9\\uD55C \\uAE30\\uC874 html\\uD30C\\uC77C-->\\n{% extends 'base.html' %}\\n{% block body %}\\n    <h2 class=\\\"text-center\\\">\\uAC8C\\uC2DC\\uD310 \\uBAA9\\uB85D</h2>\\n    <a href=\\\"{% url 'articles:create' %}\\\"><button class=\\\"btn btn-primary my-2\\\">\\uAE00 \\uC4F0\\uAE30</button></a>\\n    {% for article in articles %}\\n        <h5>{{ article.title }}</h5>\\n        <p>{{ article.content }}</p>\\n        <p>\\uB313\\uAE00 \\uC218 : {{ article.comment_set.count }}</p>\\n    {% endfor %}\\n{% endblock %}\\n<!--\\uC704 \\uD398\\uC774\\uC9C0\\uB97C \\uCD9C\\uB825\\uD558\\uAE30 \\uC704\\uD574\\uC11C \\uCFFC\\uB9AC\\uAC00 11\\uBC88 \\uBC1C\\uC0DD\\uD558\\uAC8C \\uB41C\\uB2E4. \\uBAA8\\uB4E0 \\uAC8C\\uC2DC\\uAE00(Article \\uC804\\uCCB4)\\uC744 \\uBD88\\uB7EC\\uC624\\uBA74\\uC11C 1\\uBC88 \\uBC1C\\uC0DD\\uD558\\uAC8C \\uB418\\uACE0 \\uB313\\uAE00 \\uC218\\uB97C count \\uD558\\uAE30 \\uC704\\uD55C \\uCFFC\\uB9AC\\uB4E4\\uC774 \\uAC8C\\uC2DC\\uAE00 \\uB2F9 1\\uBC88\\uC529 \\uC0DD\\uC131\\uB418\\uC5B4 10\\uBC88\\uC774 \\uC0DD\\uC131\\uB41C\\uB2E4. \\uACB0\\uAD6D \\uCD1D 11\\uBC88\\uC758 \\uCFFC\\uB9AC\\uAC00 \\uC0DD\\uC131\\uB41C\\uB2E4.-->\\n\\n<!--N+1\\uBB38\\uC81C: \\uC704\\uC640 \\uAC19\\uC740 \\uACBD\\uC6B0\\uC5D0 \\uCFFC\\uB9AC\\uC14B\\uC740 N+1\\uBC88 \\uC0DD\\uC131\\uB418\\uAC8C \\uB41C\\uB2E4. \\uB9CC\\uC77C \\uAC8C\\uC2DC\\uAE00\\uC758 \\uC218(N)\\uC774 100\\uC774\\uC5C8\\uB2E4\\uBA74 101\\uBC88 \\uCFFC\\uB9AC\\uC14B\\uC774 \\uC0DD\\uC131\\uB418\\uC5C8\\uC744 \\uAC83\\uC774\\uB2E4.-->\\n\\n\\n\\n<!--views.py\\uC5D0\\uC11C 1)\\uBC29\\uC2DD\\uC73C\\uB85C \\uAC8C\\uC2DC\\uAE00\\uC744 \\uB118\\uAE34 \\uD6C4 \\uBCC0\\uACBD\\uD55C html\\uD30C\\uC77C-->\\n{% extends 'base.html' %}\\n{% block body %}\\n    <h2 class=\\\"text-center\\\">\\uAC8C\\uC2DC\\uD310 \\uBAA9\\uB85D</h2>\\n    <a href=\\\"{% url 'articles:create' %}\\\"><button class=\\\"btn btn-primary my-2\\\">\\uAE00 \\uC4F0\\uAE30</button></a>\\n    {% for article in articles %}\\n        <h5>{{ article.title }}</h5>\\n        <p>{{ article.content }}</p>\\n        <p>\\uB313\\uAE00 \\uC218 : {{ article.comment_set_count }}</p>    \\n        <!--views.py\\uC5D0\\uC11C \\uB118\\uC5B4\\uC628 comment_set_count\\uB97C \\uC785\\uB825-->\\n    {% endfor %}\\n{% endblock %}\\n<!--Article \\uBAA8\\uB378\\uC5D0 \\uB313\\uAE00\\uC758 \\uAC1C\\uC218\\uB77C\\uB294 \\uD558\\uB098\\uC758 \\uCE7C\\uB7FC\\uC744 \\uB354 \\uCD94\\uAC00\\uD574 \\uC560\\uCD08\\uC5D0 articles\\uB97C \\uB118\\uACA8\\uC904 \\uB54C \\uB313\\uAE00\\uC758 \\uAC1C\\uC218\\uB3C4 \\uD568\\uAED8 \\uAC00\\uC9C0\\uACE0 \\uC640 \\uBAA8\\uB4E0 \\uAC8C\\uC2DC\\uAE00\\uC744 \\uBD88\\uB7EC\\uC624\\uAE30 \\uC704\\uD55C 1\\uBC88\\uC758 \\uCFFC\\uB9AC \\uC0DD\\uC131\\uB9CC \\uC774\\uB8E8\\uC5B4\\uC9C4\\uB2E4.-->\\n\\n\\n<!--2)\\uAC8C\\uC2DC\\uAE00 \\uC791\\uC131\\uC790 \\uC774\\uB984 \\uCD9C\\uB825-->\\n<!--\\uD568\\uC218\\uB97C 2)\\uB85C \\uBCC0\\uACBD\\uD55C \\uD6C4, html\\uD30C\\uC77C\\uC5D0\\uC120 \\uCD94\\uAC00\\uC801\\uC73C\\uB85C \\uC218\\uC815\\uD560 \\uAC83\\uC774 \\uC5C6\\uB2E4.-->\\n{% extends 'base.html' %}\\n{% block body %}\\n    <h2 class=\\\"text-center\\\">\\uAC8C\\uC2DC\\uD310 \\uBAA9\\uB85D</h2>\\n    <a href=\\\"{% url 'articles:create' %}\\\"><button class=\\\"btn btn-primary my-2\\\">\\uAE00 \\uC4F0\\uAE30</button></a>\\n    {% for article in articles %}\\n        <h5>{{ article.title }}</h5>\\n        <p>{{ article.content }}</p>\\n        <h3>{{ article.user.username }}</h3> <!--\\uC791\\uC131\\uC790 \\uCD9C\\uB825-->\\n    {% endfor %}\\n{% endblock %}\\n<!--\\uC704 \\uD398\\uC774\\uC9C0\\uB97C \\uCD9C\\uB825\\uD558\\uAE30 \\uC704\\uD574 \\uCFFC\\uB9AC\\uB294 11\\uBC88 \\uBC1C\\uC0DD\\uD55C\\uB2E4. \\uBAA8\\uB4E0 \\uAC8C\\uC2DC\\uAE00(Article \\uC804\\uCCB4)\\uC744 \\uBD88\\uB7EC\\uC624\\uBA74\\uC11C 1\\uBC88 \\uBC1C\\uC0DD\\uD558\\uAC8C \\uB418\\uACE0, article \\uB9C8\\uB2E4 \\uD558\\uB098\\uC529 \\uAC00\\uC9C0\\uACE0 \\uC788\\uB294 user \\uC815\\uBCF4\\uB97C \\uCD9C\\uB825\\uD558\\uAE30 \\uC704\\uD574 \\uAC8C\\uC2DC\\uAE00 \\uB2F9 1\\uBC88\\uC529 \\uCFFC\\uB9AC\\uB97C \\uC0DD\\uC131\\uD558\\uC5EC \\uCD1D 11\\uBC88 \\uCFFC\\uB9AC\\uB97C \\uC0DD\\uC131\\uD558\\uAC8C \\uB41C\\uB2E4.-->\\n<!--views.py\\uB97C 2)\\uC640 \\uAC19\\uC774 \\uC218\\uC815\\uD558\\uBA74 \\uC0DD\\uC131 \\uD69F\\uC218\\uAC00 1\\uBC88\\uC73C\\uB85C \\uC904\\uC5B4\\uB4E0\\uB2E4. \\uC774\\uB294 JOIN\\uC744 \\uD65C\\uC6A9\\uD588\\uAE30 \\uB54C\\uBB38\\uC73C\\uB85C JOIN\\uC740 \\uB450 \\uAC1C\\uC758 \\uD14C\\uC774\\uBE14\\uC744 \\uD569\\uCCD0\\uC11C \\uD558\\uB098\\uC758 \\uD14C\\uC774\\uBE14\\uCC98\\uB7FC \\uAC00\\uC9C0\\uACE0 \\uC628\\uB2E4.-->\\n\\n\\n<!--3)\\uAC8C\\uC2DC\\uAE00\\uBCC4 \\uB313\\uAE00\\uC744 \\uBAA8\\uB450 \\uCD9C\\uB825-->\\n<!--\\uD568\\uC218\\uB97C 3)\\uC73C\\uB85C \\uBCC0\\uACBD\\uD55C \\uD6C4, html\\uD30C\\uC77C\\uC5D0\\uC120 \\uCD94\\uAC00\\uC801\\uC73C\\uB85C \\uC218\\uC815\\uD560 \\uAC83\\uC774 \\uC5C6\\uB2E4.-->\\n{% extends 'base.html' %}\\n{% block body %}\\n    <h2 class=\\\"text-center\\\">\\uAC8C\\uC2DC\\uD310 \\uBAA9\\uB85D</h2>\\n    <a href=\\\"{% url 'articles:create' %}\\\"><button class=\\\"btn btn-primary my-2\\\">\\uAE00 \\uC4F0\\uAE30</button></a>\\n    {% for article in articles %}\\n        <h5>{{ article.title }}</h5>\\n        <p>{{ article.content }}</p>\\n        {% for comment in article.comment_set.all %}\\n            <p>{{ comment.content }}</p>\\n        {% endfor %}\\n    </div>\\n    {% endfor %}\\n<!--\\uB9C8\\uCC2C\\uAC00\\uC9C0 \\uC774\\uC720(\\uC804\\uCCB4 \\uAC8C\\uC2DC\\uAE00\\uC744 \\uBD88\\uB7EC\\uC624\\uBA74\\uC11C 1\\uBC88, 10\\uAC1C\\uC758 \\uB313\\uAE00 \\uBD88\\uB7EC\\uC624\\uBA74\\uC11C 10\\uBC88)\\uB85C 11\\uBC88\\uC758 \\uCFFC\\uB9AC\\uC14B\\uC774 \\uC0DD\\uC131\\uB41C\\uB2E4.-->\\n<!--3)\\uACFC \\uAC19\\uC774 \\uC218\\uC815 \\uD6C4\\uC5D0\\uB294 \\uCFFC\\uB9AC\\uC14B \\uC0DD\\uC131\\uC774 2\\uBC88\\uC73C\\uB85C \\uAC10\\uC18C\\uD55C\\uB2E4.-->\\n\\n\\n\\n<!--4) \\uB313\\uAE00 \\uBAA9\\uB85D\\uACFC \\uB313\\uAE00 \\uC791\\uC131\\uC790 \\uB3D9\\uC2DC \\uCD9C\\uB825-->\\n<!--\\uD568\\uC218\\uB97C 4)\\uB85C \\uBCC0\\uACBD\\uD55C \\uD6C4, html\\uD30C\\uC77C\\uC5D0\\uC120 \\uCD94\\uAC00\\uC801\\uC73C\\uB85C \\uC218\\uC815\\uD560 \\uAC83\\uC774 \\uC5C6\\uB2E4.-->\\n{% extends 'base.html' %}\\n{% block body %}\\n    <h2 class=\\\"text-center\\\">\\uAC8C\\uC2DC\\uD310 \\uBAA9\\uB85D</h2>\\n    <a href=\\\"{% url 'articles:create' %}\\\"><button class=\\\"btn btn-primary my-2\\\">\\uAE00 \\uC4F0\\uAE30</button></a>\\n    {% for article in articles %}\\n        <h5>{{ article.title }}</h5>\\n        <p>{{ article.content }}</p>\\n        {% for comment in article.comment_set.all %}\\n            <p>{{ comment.user.username }} : {{ comment.content }}</p>\\n        {% endfor %}\\n    </div>\\n    {% endfor %}\\n<!--\\uC774 \\uACBD\\uC6B0 \\uCFFC\\uB9AC\\uB294 \\uCD1D 111\\uBC88 \\uBC1C\\uC0DD\\uD55C\\uB2E4. \\uBAA8\\uB4E0 \\uAC8C\\uC2DC\\uAE00\\uC744 \\uBD88\\uB7EC\\uC624\\uBA74\\uC11C 1\\uBC88, \\uAC01 \\uAC8C\\uC2DC\\uAE00\\uC758 \\uB313\\uAE00\\uC744 \\uBD88\\uB7EC\\uC624\\uBA74\\uC11C 10\\uBC88, \\uB313\\uAE00 \\uB9C8\\uB2E4 \\uC791\\uC131\\uD55C \\uC720\\uC800\\uAC00 \\uC874\\uC7AC\\uD558\\uBBC0\\uB85C \\uC774\\uB4E4\\uC744 \\uBD88\\uB7EC\\uC624\\uB294 \\uB370 \\uB610 10\\uBC88\\uC774 \\uC0DD\\uC131\\uB418\\uC5B4 1+10+10*10\\uC73C\\uB85C 111\\uBC88 \\uBC1C\\uC0DD\\uD55C\\uB2E4.-->\\n<!--\\uAC1C\\uC120 \\uD6C4\\uC5D0\\uB294 2\\uAC1C\\uC758 \\uCFFC\\uB9AC\\uB9CC \\uBC1C\\uC0DD-->\\n\")))))), mdx(\"br\", null), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"SQL JOIN \\uBD80\\uAC00 \\uC124\\uBA85\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"JOIN: \\uB450 \\uAC1C\\uC758 \\uD14C\\uC774\\uBE14\\uC744 \\uD569\\uCCD0\\uC11C \\uD558\\uB098\\uC758 \\uD14C\\uC774\\uBE14\\uB85C \\uAC00\\uC838\\uC628\\uB2E4.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\uD14C\\uC774\\uBE14, \\uB370\\uC774\\uD130 \\uC0DD\\uC131\")), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"-- \\uD14C\\uC774\\uBE14 \\uC0DD\\uC131\\nCREATE TABLE user(\\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\\n    username TEXT\\n);\\n\\nCREATE TABLE article(\\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\\n    title TEXT,\\n    user_id integer NOT NULL REFERENCES user (id) DEFERRABLE INITIALLY DEFERRED\\n);\\n\\nCREATE TABLE comment(\\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\\n    content TEXT,\\n    article_id integer NOT NULL REFERENCES article (id) DEFERRABLE INITIALLY DEFERRED\\n);\\n\\n-- \\uB370\\uC774\\uD130 \\uC0DD\\uC131\\nINSERT INTO user (username) VALUES ('\\uAE00\\uC4F4\\uC0AC\\uB78C');\\nINSERT INTO user (username) VALUES ('\\uAE00\\uC548\\uC4F4\\uC0AC\\uB78C');\\n\\n\\nINSERT INTO article (title, user_id) VALUES ('1\\uAE00\\uBB34\\uD50C', 1);\\nINSERT INTO article (title, user_id) VALUES ('2\\uAE00', 1);\\n\\nINSERT INTO comment (content, article_id) VALUES ('2\\uAE001\\uB313', 2);\\nINSERT INTO comment (content, article_id) VALUES ('2\\uAE002\\uB313', 2);\\nCOMMIT;\\n\")), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"LEFT OUTER JOIN(\\uAC8C\\uC2DC\\uAE00 + \\uB313\\uAE00)\")), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"--artcle\\uC5D0 \\uB313\\uAE00 \\uB0B4\\uC6A9\\uC744 \\uAC19\\uC774 \\uAC00\\uC9C0\\uACE0 \\uC624\\uACA0\\uB2E4\\nSELECT * from article LEFT OUTER JOIN comment ON article.id=comment.article_id\\n\\n\\n--\\uC704 \\uBA85\\uB839\\uC5B4\\uC758 \\uACB0\\uACFC \\uD14C\\uC774\\uBE14\\uC740 \\uC544\\uB798\\uC640 \\uAC19\\uB2E4.\\nid | title | user_id | id | content | article_id\\n1  | 1\\uAE00\\uBB34\\uD50C|    1    |    |          |\\n2  | 2\\uAE00   |    1    |  1  |  2\\uAE001\\uB313  |  2\\n3  | 2\\uAE00   |    1    |  2  |  2\\uAE002\\uB313  |  2\\n--id | title | user_id |\\uAE4C\\uC9C0\\uB294 article\\uC758 \\uD14C\\uC774\\uBE14, id | content | article_id\\uB294 comment\\uC758 \\uD14C\\uC774\\uBE14\\uB85C \\uB450 \\uD14C\\uC774\\uBE14\\uC774 \\uD569\\uCCD0\\uC838 \\uC704\\uC640 \\uAC19\\uC774 \\uD45C\\uC2DC\\uB418\\uAC8C \\uB41C\\uB2E4.\\n\")), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"INNER JOIN(\\uAC8C\\uC2DC\\uAE00 + \\uC0AC\\uC6A9\\uC790)\")), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"SELECT * FROM article INNER JOIN user ON article.user_id = user.id;\\n\\nid |  title  | user_id | id | username\\n 1 | 1\\uAE00\\uBB34\\uD50C  |    1    |  1  | \\uAE00\\uC4F4\\uC0AC\\uB78C\\n 2 |   2\\uAE00   |    1    |  1  | \\uAE00\\uC4F4\\uC0AC\\uB78C\\n\")))), mdx(\"br\", null), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\uC694\\uC57D\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\uD2B9\\uC815 \\uBAA8\\uB378\\uACFC \\uAD00\\uACC4\\uB97C \\uAC16\\uB294 \\uCD94\\uAC00\\uC801\\uC778 \\uCFFC\\uB9AC\\uB4E4(Comment,User)\\uC744 \\uBB36\\uC5B4\\uC11C \\uAC00\\uC838\\uC624\\uB294 3\\uAC00\\uC9C0 \\uBC29\\uBC95\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"anotate: \\uB2E8\\uC21C \\uACC4\\uC0B0 \\uACB0\\uACFC\\uB97C \\uD544\\uB4DC\\uC5D0 \\uCD94\\uAC00\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"select_related: 1:1 \\uB610\\uB294 N\\uC774 1\\uC744 \\uCC3E\\uC744 \\uB54C \\uC0AC\\uC6A9\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"prefetch_related: M:N \\uB610\\uB294 1\\uC774 N\\uC744 \\uCC3E\\uC744 \\uB54C\")))))));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Query 최적화 https://docs.djangoproject.com/en/3.0/topics/db/optimization/  참고 쿼리셋은 lazy하다. 실제 실행되기 전까지는 작동하지 않는다. sql문이 실제 실행되는 경우들 반복 step…","timeToRead":1,"banner":null}},"pageContext":{"slug":"/django-query-최적화","formatString":"DD.MM.YYYY"}},"staticQueryHashes":["3090400250","3090400250","3090400250","318001574"]}